<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IPO Management - Demo Interface</title>
  <img src="images/logo.jpg" alt="ipo image">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="flex">
      <h1>IPO Management ‚Äî Admin Dashboard</h1>
      <div style="display:flex;gap:12px;align-items:center">
        <div class="muted">Signed in as <strong id="user-email">admin@example.com</strong></div>
        <button class="btn" id="btn-logout" onclick="logout()">Logout</button>
      </div>
    </header>

    <div class="layout">
      <!-- Left nav -->
      <nav class="side card">
        <div style="font-weight:700;margin-bottom:8px">Menu</div>
        <a class="nav-item active" href="#dashboard" onclick="showSection('dashboard')">üè† Dashboard</a>
        <a class="nav-item" href="#companies" onclick="showSection('companies')">üè¢ Companies</a>
        <a class="nav-item" href="#ipos" onclick="showSection('ipos')">üìà IPOs</a>
        <a class="nav-item" href="#applications" onclick="showSection('applications')">üìù Applications</a>
        <a class="nav-item" href="#transactions" onclick="showSection('transactions')">üí≥ Transactions</a>
        <div style="height:10px"></div>
        <div class="muted">Version 1.0 ¬∑ Local demo</div>
      </nav>

      <!-- Main content -->
      <main style="flex:1">
        <!-- DASHBOARD -->
        <section id="dashboard" class="card" style="margin-bottom:18px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="muted">Overview</div>
              <h2 style="margin:6px 0;">Dashboard</h2>
            </div>
            <div class="toolbar">
              <input class="search" id="global-search" placeholder="Search companies, investors..." oninput="globalSearch(event)">
              <button class="btn" onclick="refreshDashboard()">Refresh</button>
            </div>
          </div>

          <div class="grid cols-3" style="margin-top:16px">
            <div class="card">
              <div class="muted">Total Investors</div>
              <div class="value" id="kpi-investors">0</div>
            </div>
            <div class="card">
              <div class="muted">Active IPOs</div>
              <div class="value" id="kpi-ipos">0</div>
            </div>
            <div class="card">
              <div class="muted">Pending Applications</div>
              <div class="value" id="kpi-apps">0</div>
            </div>
          </div>

          <div style="margin-top:18px" class="card">
            <canvas id="chart-ipoprice" height="120"></canvas>
          </div>
        </section>

        <!-- COMPANIES -->
        <section id="companies" class="card" style="display:none;margin-bottom:18px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="muted">Master data</div>
              <h2 style="margin:6px 0;">Companies</h2>
            </div>
            <div>
              <button class="btn" onclick="openCompanyModal()">+ Add Company</button>
            </div>
          </div>

          <div style="margin-top:12px; overflow:auto">
            <table class="table" id="table-companies">
              <thead>
                <tr><th>ID</th><th>Name</th><th>Sector</th><th>CEO</th><th>HQ</th><th>Actions</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <!-- IPOs -->
        <section id="ipos" class="card" style="display:none;margin-bottom:18px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="muted">Issues</div>
              <h2 style="margin:6px 0;">IPO Issues</h2>
            </div>
            <div>
              <button class="btn" onclick="openIPOForm()">+ Create IPO</button>
            </div>
          </div>

          <div style="margin-top:12px; overflow:auto">
            <table class="table" id="table-ipos">
              <thead>
                <tr><th>ID</th><th>Company</th><th>Issue Date</th><th>Price</th><th>Total Shares</th><th>Status</th><th>Actions</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <!-- APPLICATIONS -->
        <section id="applications" class="card" style="display:none;margin-bottom:18px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="muted">Processing</div>
              <h2 style="margin:6px 0;">Applications</h2>
            </div>
            <div>
              <button class="btn" onclick="openApplicationModal()">+ New Application</button>
            </div>
          </div>

          <div style="margin-top:12px; overflow:auto">
            <table class="table" id="table-applications">
              <thead>
                <tr><th>ID</th><th>IPO</th><th>Investor</th><th>Shares</th><th>Date</th><th>Status</th><th>Actions</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <!-- TRANSACTIONS -->
        <section id="transactions" class="card" style="display:none;margin-bottom:18px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="muted">Payments</div>
              <h2 style="margin:6px 0;">Transactions</h2>
            </div>
            <div>
              <button class="btn" onclick="openTransactionModal()">+ New Transaction</button>
            </div>
          </div>

          <div style="margin-top:12px; overflow:auto">
            <table class="table" id="table-transactions">
              <thead>
                <tr><th>ID</th><th>Investor</th><th>Amount</th><th>Date</th><th>Method</th><th>Status</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <footer class="small muted">Built for demo ‚Äî replace API endpoints in the script to connect your backend.</footer>
      </main>
    </div>
  </div>

  <!-- Modal templates -->
  <div id="modal-company" class="modal" role="dialog" aria-hidden="true">
    <div class="panel">
      <h3 id="company-modal-title">Add Company</h3>
      <div style="margin-top:8px">
        <div class="form-row">
          <div class="col">
            <label for="company-name">Company Name</label>
            <input id="company-name" type="text" />
          </div>
          <div class="col">
            <label for="company-sector">Sector</label>
            <input id="company-sector" type="text" />
          </div>
        </div>
        <div class="form-row">
          <div class="col">
            <label for="company-ceo">CEO</label>
            <input id="company-ceo" type="text" />
          </div>
          <div class="col">
            <label for="company-hq">Headquarters</label>
            <input id="company-hq" type="text" />
          </div>
        </div>
        <div class="actions">
          <button class="btn ghost" onclick="closeModal('modal-company')">Cancel</button>
          <button class="btn" onclick="saveCompany()">Save</button>
        </div>
      </div>
    </div>
  </div>

  <div id="modal-application" class="modal" role="dialog" aria-hidden="true">
    <div class="panel">
      <h3>New Application</h3>
      <div style="margin-top:8px">
        <div class="form-row">
          <div class="col">
            <label for="app-ipo">IPO</label>
            <select id="app-ipo"></select>
          </div>
          <div class="col">
            <label for="app-investor">Investor</label>
            <select id="app-investor"></select>
          </div>
        </div>
        <div class="form-row">
          <div class="col">
            <label for="app-shares">Shares Applied</label>
            <input id="app-shares" type="number" min="1" />
          </div>
          <div class="col">
            <label for="app-date">Application Date</label>
            <input id="app-date" type="date" />
          </div>
        </div>

        <div class="actions">
          <button class="btn ghost" onclick="closeModal('modal-application')">Cancel</button>
          <button class="btn" onclick="saveApplication()">Submit</button>
        </div>
      </div>
    </div>
  </div>

  <div id="modal-transaction" class="modal" role="dialog" aria-hidden="true">
    <div class="panel">
      <h3>New Transaction</h3>
      <div style="margin-top:8px">
        <div class="form-row">
          <div class="col">
            <label for="trx-investor">Investor</label>
            <select id="trx-investor"></select>
          </div>
          <div class="col">
            <label for="trx-amount">Amount</label>
            <input id="trx-amount" type="number" min="0.01" step="0.01" />
          </div>
        </div>
        <div class="form-row">
          <div class="col">
            <label for="trx-method">Payment Method</label>
            <select id="trx-method"><option>UPI</option><option>NETBANKING</option><option>CARD</option></select>
          </div>
          <div class="col">
            <label for="trx-date">Transaction Date</label>
            <input id="trx-date" type="date" />
          </div>
        </div>
        <div class="actions">
          <button class="btn ghost" onclick="closeModal('modal-transaction')">Cancel</button>
          <button class="btn" onclick="saveTransaction()">Save</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Login modal (simple demo) -->
  <div id="modal-login" class="modal active" role="dialog" aria-hidden="false">
    <div class="panel">
      <h2 style="margin-top:0">Sign in</h2>
      <div style="margin-top:8px">
        <label for="login-email">Email</label>
        <input id="login-email" type="email" placeholder="admin@example.com" />
        <label for="login-password" style="margin-top:8px">Password</label>
        <input id="login-password" type="password" placeholder="password" />
        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
          <button class="btn ghost" onclick="demoLogin()">Use Demo Account</button>
          <button class="btn" onclick="login()">Login</button>
        </div>
      </div>
    </div>
  </div>